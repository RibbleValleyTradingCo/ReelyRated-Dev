schemaname,tablename,policyname,permissive,roles,cmd,qual,with_check
public,admin_users,admin_users_self_select,PERMISSIVE,{public},SELECT,(auth.uid() = user_id),
public,baits,baits_select_all,PERMISSIVE,{public},SELECT,true,
public,catch_comments,catch_comments_admin_read_all,PERMISSIVE,{public},SELECT,is_admin(auth.uid()),
public,catch_comments,catch_comments_admin_update,PERMISSIVE,{public},UPDATE,is_admin(auth.uid()),is_admin(auth.uid())
public,catch_comments,catch_comments_insert_viewable,PERMISSIVE,{public},INSERT,,"(((user_id = auth.uid()) OR is_admin(auth.uid())) AND (EXISTS ( SELECT 1
   FROM catches c
  WHERE ((c.id = catch_comments.catch_id) AND (c.deleted_at IS NULL) AND ((c.user_id = auth.uid()) OR (c.visibility = 'public'::visibility_type) OR ((c.visibility = 'followers'::visibility_type) AND (auth.uid() IS NOT NULL) AND is_following(auth.uid(), c.user_id)) OR is_admin(auth.uid()))))))"
public,catch_comments,catch_comments_public_read,PERMISSIVE,{public},SELECT,"((deleted_at IS NULL) AND (EXISTS ( SELECT 1
   FROM catches c
  WHERE ((c.id = catch_comments.catch_id) AND (c.deleted_at IS NULL) AND ((auth.uid() = c.user_id) OR (EXISTS ( SELECT 1
           FROM admin_users au
          WHERE (au.user_id = auth.uid()))) OR ((NOT is_blocked_either_way(auth.uid(), c.user_id)) AND (NOT is_blocked_either_way(auth.uid(), catch_comments.user_id)) AND (((c.visibility = 'public'::visibility_type) AND ((NOT (EXISTS ( SELECT 1
           FROM profiles p
          WHERE ((p.id = c.user_id) AND (p.is_private = true))))) OR ((auth.uid() IS NOT NULL) AND (EXISTS ( SELECT 1
           FROM profile_follows pf
          WHERE ((pf.follower_id = auth.uid()) AND (pf.following_id = c.user_id))))))) OR ((c.visibility = 'followers'::visibility_type) AND (auth.uid() IS NOT NULL) AND (EXISTS ( SELECT 1
           FROM profile_follows pf
          WHERE ((pf.follower_id = auth.uid()) AND (pf.following_id = c.user_id))))))))))))",
public,catch_comments,catch_comments_update_owner,PERMISSIVE,{public},UPDATE,(auth.uid() = user_id),(auth.uid() = user_id)
public,catch_leaderboard_scores,catch_leaderboard_scores_select_public,PERMISSIVE,"{anon,authenticated}",SELECT,true,
public,catch_rating_stats,catch_rating_stats_select_public,PERMISSIVE,"{anon,authenticated}",SELECT,true,
public,catch_reactions,catch_reactions_owner_all,PERMISSIVE,{public},ALL,(auth.uid() = user_id),(auth.uid() = user_id)
public,catch_reactions,catch_reactions_select_viewable,PERMISSIVE,{public},SELECT,"(EXISTS ( SELECT 1
   FROM catches c
  WHERE ((c.id = catch_reactions.catch_id) AND (c.deleted_at IS NULL) AND ((c.user_id = auth.uid()) OR (c.visibility = 'public'::visibility_type) OR ((c.visibility = 'followers'::visibility_type) AND (auth.uid() IS NOT NULL) AND is_following(auth.uid(), c.user_id)) OR is_admin(auth.uid())))))",
public,catch_reactions,catch_reactions_write_visible_unblocked_ins,RESTRICTIVE,{authenticated},INSERT,,"((auth.uid() IS NOT NULL) AND (user_id = auth.uid()) AND (EXISTS ( SELECT 1
   FROM catches c
  WHERE ((c.id = catch_reactions.catch_id) AND (c.deleted_at IS NULL) AND (NOT is_blocked_either_way(auth.uid(), c.user_id)) AND (c.user_id <> auth.uid()) AND (is_admin(auth.uid()) OR (c.visibility = 'public'::visibility_type) OR ((c.visibility = 'followers'::visibility_type) AND is_following(auth.uid(), c.user_id)))))))"
public,catch_reactions,catch_reactions_write_visible_unblocked_upd,RESTRICTIVE,{authenticated},UPDATE,"((auth.uid() IS NOT NULL) AND (user_id = auth.uid()) AND (EXISTS ( SELECT 1
   FROM catches c
  WHERE ((c.id = catch_reactions.catch_id) AND (c.deleted_at IS NULL) AND (NOT is_blocked_either_way(auth.uid(), c.user_id)) AND (c.user_id <> auth.uid()) AND (is_admin(auth.uid()) OR (c.visibility = 'public'::visibility_type) OR ((c.visibility = 'followers'::visibility_type) AND is_following(auth.uid(), c.user_id)))))))",
public,catches,catches_admin_read_all,PERMISSIVE,{public},SELECT,is_admin(auth.uid()),
public,catches,catches_owner_all,PERMISSIVE,{public},SELECT,((( SELECT auth.uid() AS uid) = user_id) AND (deleted_at IS NULL)),
public,catches,catches_owner_mutate,PERMISSIVE,{public},INSERT,,((auth.uid() = user_id) AND (NOT is_admin(auth.uid())))
public,catches,catches_owner_update_delete,PERMISSIVE,{public},UPDATE,((auth.uid() = user_id) AND (NOT is_admin(auth.uid()))),((auth.uid() = user_id) AND (NOT is_admin(auth.uid())))
public,catches,catches_public_read,PERMISSIVE,{public},SELECT,"((deleted_at IS NULL) AND ((auth.uid() = user_id) OR (EXISTS ( SELECT 1
   FROM admin_users au
  WHERE (au.user_id = auth.uid()))) OR ((COALESCE(is_blocked_either_way(auth.uid(), user_id), false) = false) AND (((visibility = 'public'::visibility_type) AND ((NOT (EXISTS ( SELECT 1
   FROM profiles p
  WHERE ((p.id = catches.user_id) AND (p.is_private = true))))) OR ((auth.uid() IS NOT NULL) AND (EXISTS ( SELECT 1
   FROM profile_follows pf
  WHERE ((pf.follower_id = auth.uid()) AND (pf.following_id = catches.user_id))))))) OR ((visibility = 'followers'::visibility_type) AND (auth.uid() IS NOT NULL) AND (EXISTS ( SELECT 1
   FROM profile_follows pf
  WHERE ((pf.follower_id = auth.uid()) AND (pf.following_id = catches.user_id)))))))))",
public,community_stats_live,community_stats_live_select_public,PERMISSIVE,"{anon,authenticated}",SELECT,true,
public,community_stats_users,community_stats_users_select_public,PERMISSIVE,"{anon,authenticated}",SELECT,true,
public,community_stats_waterways,community_stats_waterways_select_public,PERMISSIVE,"{anon,authenticated}",SELECT,true,
public,moderation_log,moderation_log_admin_read,PERMISSIVE,{public},SELECT,is_admin(auth.uid()),
public,notifications,notifications_admin_read,PERMISSIVE,{public},SELECT,is_admin(auth.uid()),
public,notifications,notifications_recipient_only,PERMISSIVE,{public},ALL,(auth.uid() = user_id),(auth.uid() = user_id)
public,profile_blocks,profile_blocks_delete_admin_all,PERMISSIVE,{authenticated},DELETE,"(EXISTS ( SELECT 1
   FROM admin_users au
  WHERE (au.user_id = ( SELECT auth.uid() AS uid))))",
public,profile_blocks,profile_blocks_delete_self,PERMISSIVE,{authenticated},DELETE,(( SELECT auth.uid() AS uid) = blocker_id),
public,profile_blocks,profile_blocks_insert_admin_all,PERMISSIVE,{authenticated},INSERT,,"(EXISTS ( SELECT 1
   FROM admin_users au
  WHERE (au.user_id = ( SELECT auth.uid() AS uid))))"
public,profile_blocks,profile_blocks_insert_self,PERMISSIVE,{authenticated},INSERT,,(( SELECT auth.uid() AS uid) = blocker_id)
public,profile_blocks,profile_blocks_select_admin_all,PERMISSIVE,{authenticated},SELECT,"(EXISTS ( SELECT 1
   FROM admin_users au
  WHERE (au.user_id = ( SELECT auth.uid() AS uid))))",
public,profile_blocks,profile_blocks_select_self_or_blocked,PERMISSIVE,{authenticated},SELECT,((( SELECT auth.uid() AS uid) = blocker_id) OR (( SELECT auth.uid() AS uid) = blocked_id)),
public,profile_follows,profile_follows_admin_select_all,PERMISSIVE,{public},SELECT,is_admin(auth.uid()),
public,profile_follows,profile_follows_insert_not_blocked,RESTRICTIVE,{authenticated},INSERT,,"((auth.uid() = follower_id) AND (following_id <> auth.uid()) AND (NOT is_blocked_either_way(auth.uid(), following_id)))"
public,profile_follows,profile_follows_owner_all,PERMISSIVE,{public},ALL,(auth.uid() = follower_id),(auth.uid() = follower_id)
public,profile_follows,profile_follows_select_related,PERMISSIVE,{public},SELECT,((auth.uid() = follower_id) OR (auth.uid() = following_id)),
public,profiles,profiles_select_authenticated,PERMISSIVE,{authenticated},SELECT,true,
public,profiles,profiles_update_self,PERMISSIVE,{authenticated},UPDATE,(( SELECT auth.uid() AS uid) = id),(( SELECT auth.uid() AS uid) = id)
public,rate_limits,rate_limits_admin_select,PERMISSIVE,{public},SELECT,"(EXISTS ( SELECT 1
   FROM admin_users au
  WHERE (au.user_id = auth.uid())))",
public,rate_limits,rate_limits_self_insert,PERMISSIVE,{authenticated},INSERT,,(auth.uid() = user_id)
public,ratings,ratings_owner_mutate,PERMISSIVE,{public},ALL,(auth.uid() = user_id),(auth.uid() = user_id)
public,ratings,ratings_read_visible_catches,PERMISSIVE,{public},SELECT,"(EXISTS ( SELECT 1
   FROM catches c
  WHERE ((c.id = ratings.catch_id) AND (c.deleted_at IS NULL) AND (is_admin(auth.uid()) OR (c.user_id = auth.uid()) OR ((auth.uid() IS NULL) AND (c.visibility = 'public'::visibility_type)) OR ((auth.uid() IS NOT NULL) AND (NOT is_admin(auth.uid())) AND ((c.visibility = 'public'::visibility_type) OR ((c.visibility = 'followers'::visibility_type) AND is_following(auth.uid(), c.user_id))))))))",
public,ratings,ratings_write_visible_unblocked_ins,RESTRICTIVE,{authenticated},INSERT,,"((auth.uid() IS NOT NULL) AND (user_id = auth.uid()) AND (EXISTS ( SELECT 1
   FROM catches c
  WHERE ((c.id = ratings.catch_id) AND (c.deleted_at IS NULL) AND (c.allow_ratings IS TRUE) AND (NOT is_blocked_either_way(auth.uid(), c.user_id)) AND (c.user_id <> auth.uid()) AND (is_admin(auth.uid()) OR (c.visibility = 'public'::visibility_type) OR ((c.visibility = 'followers'::visibility_type) AND is_following(auth.uid(), c.user_id)))))))"
public,ratings,ratings_write_visible_unblocked_upd,RESTRICTIVE,{authenticated},UPDATE,"((auth.uid() IS NOT NULL) AND (user_id = auth.uid()) AND (EXISTS ( SELECT 1
   FROM catches c
  WHERE ((c.id = ratings.catch_id) AND (c.deleted_at IS NULL) AND (c.allow_ratings IS TRUE) AND (NOT is_blocked_either_way(auth.uid(), c.user_id)) AND (c.user_id <> auth.uid()) AND (is_admin(auth.uid()) OR (c.visibility = 'public'::visibility_type) OR ((c.visibility = 'followers'::visibility_type) AND is_following(auth.uid(), c.user_id)))))))",
public,reports,reports_admin_all,PERMISSIVE,{public},ALL,is_admin(auth.uid()),is_admin(auth.uid())
public,reports,reports_owner_all,PERMISSIVE,{public},ALL,(auth.uid() = reporter_id),(auth.uid() = reporter_id)
public,sessions,sessions_modify_own,PERMISSIVE,{public},ALL,(auth.uid() = user_id),(auth.uid() = user_id)
public,sessions,sessions_select_own,PERMISSIVE,{public},SELECT,(auth.uid() = user_id),
public,species,species_select_all,PERMISSIVE,{public},SELECT,true,
public,tags,tags_select_all,PERMISSIVE,{public},SELECT,true,
public,user_warnings,user_warnings_admin_read,PERMISSIVE,{public},SELECT,is_admin(auth.uid()),
public,venue_events,venue_events_select_published,PERMISSIVE,{public},SELECT,(is_published = true),
public,venue_opening_hours,venue_opening_hours_delete,PERMISSIVE,{authenticated},DELETE,is_venue_admin_or_owner(venue_id),
public,venue_opening_hours,venue_opening_hours_insert,PERMISSIVE,{authenticated},INSERT,,is_venue_admin_or_owner(venue_id)
public,venue_opening_hours,venue_opening_hours_select,PERMISSIVE,{public},SELECT,"(EXISTS ( SELECT 1
   FROM venues v
  WHERE ((v.id = venue_opening_hours.venue_id) AND (v.is_published OR is_venue_admin_or_owner(v.id)))))",
public,venue_opening_hours,venue_opening_hours_update,PERMISSIVE,{authenticated},UPDATE,is_venue_admin_or_owner(venue_id),is_venue_admin_or_owner(venue_id)
public,venue_owners,venue_owners_admin_all,PERMISSIVE,{public},ALL,"(EXISTS ( SELECT 1
   FROM admin_users au
  WHERE (au.user_id = auth.uid())))","(EXISTS ( SELECT 1
   FROM admin_users au
  WHERE (au.user_id = auth.uid())))"
public,venue_owners,venue_owners_self_select,PERMISSIVE,{public},SELECT,(auth.uid() = user_id),
public,venue_photos,venue_photos_delete,PERMISSIVE,{authenticated},DELETE,is_venue_admin_or_owner(venue_id),
public,venue_photos,venue_photos_insert,PERMISSIVE,{authenticated},INSERT,,is_venue_admin_or_owner(venue_id)
public,venue_photos,venue_photos_select,PERMISSIVE,{public},SELECT,"(EXISTS ( SELECT 1
   FROM venues v
  WHERE ((v.id = venue_photos.venue_id) AND (v.is_published OR is_venue_admin_or_owner(v.id)))))",
public,venue_photos,venue_photos_update,PERMISSIVE,{authenticated},UPDATE,is_venue_admin_or_owner(venue_id),is_venue_admin_or_owner(venue_id)
public,venue_pricing_tiers,venue_pricing_tiers_delete,PERMISSIVE,{authenticated},DELETE,is_venue_admin_or_owner(venue_id),
public,venue_pricing_tiers,venue_pricing_tiers_insert,PERMISSIVE,{authenticated},INSERT,,is_venue_admin_or_owner(venue_id)
public,venue_pricing_tiers,venue_pricing_tiers_select,PERMISSIVE,{public},SELECT,"(EXISTS ( SELECT 1
   FROM venues v
  WHERE ((v.id = venue_pricing_tiers.venue_id) AND (v.is_published OR is_venue_admin_or_owner(v.id)))))",
public,venue_pricing_tiers,venue_pricing_tiers_update,PERMISSIVE,{authenticated},UPDATE,is_venue_admin_or_owner(venue_id),is_venue_admin_or_owner(venue_id)
public,venue_ratings,Admins can select all venue ratings,PERMISSIVE,{public},SELECT,is_admin(auth.uid()),
public,venue_ratings,Allow users to delete own venue ratings,PERMISSIVE,{public},DELETE,(user_id = auth.uid()),
public,venue_ratings,Allow users to insert own venue ratings,PERMISSIVE,{public},INSERT,,(user_id = auth.uid())
public,venue_ratings,Allow users to select own venue ratings,PERMISSIVE,{public},SELECT,(user_id = auth.uid()),
public,venue_ratings,Allow users to update own venue ratings,PERMISSIVE,{public},UPDATE,(user_id = auth.uid()),
public,venue_rules,venue_rules_delete,PERMISSIVE,{authenticated},DELETE,is_venue_admin_or_owner(venue_id),
public,venue_rules,venue_rules_insert,PERMISSIVE,{authenticated},INSERT,,is_venue_admin_or_owner(venue_id)
public,venue_rules,venue_rules_select,PERMISSIVE,{public},SELECT,"(EXISTS ( SELECT 1
   FROM venues v
  WHERE ((v.id = venue_rules.venue_id) AND (v.is_published OR is_venue_admin_or_owner(v.id)))))",
public,venue_rules,venue_rules_update,PERMISSIVE,{authenticated},UPDATE,is_venue_admin_or_owner(venue_id),is_venue_admin_or_owner(venue_id)
public,venue_species_stock,venue_species_stock_delete,PERMISSIVE,{authenticated},DELETE,is_venue_admin_or_owner(venue_id),
public,venue_species_stock,venue_species_stock_insert,PERMISSIVE,{authenticated},INSERT,,is_venue_admin_or_owner(venue_id)
public,venue_species_stock,venue_species_stock_select,PERMISSIVE,{public},SELECT,"(EXISTS ( SELECT 1
   FROM venues v
  WHERE ((v.id = venue_species_stock.venue_id) AND (v.is_published OR is_venue_admin_or_owner(v.id)))))",
public,venue_species_stock,venue_species_stock_update,PERMISSIVE,{authenticated},UPDATE,is_venue_admin_or_owner(venue_id),is_venue_admin_or_owner(venue_id)
public,venues,venues_insert_admin_only,PERMISSIVE,{public},INSERT,,"(EXISTS ( SELECT 1
   FROM admin_users au
  WHERE (au.user_id = auth.uid())))"
public,venues,venues_select_admin_all,PERMISSIVE,{public},SELECT,"(EXISTS ( SELECT 1
   FROM admin_users au
  WHERE (au.user_id = auth.uid())))",
public,venues,venues_select_owner,PERMISSIVE,{public},SELECT,"(EXISTS ( SELECT 1
   FROM venue_owners vo
  WHERE ((vo.venue_id = venues.id) AND (vo.user_id = auth.uid()))))",
public,venues,venues_select_published,PERMISSIVE,{public},SELECT,(is_published = true),
public,venues,venues_update_admin_all,PERMISSIVE,{public},UPDATE,"(EXISTS ( SELECT 1
   FROM admin_users au
  WHERE (au.user_id = auth.uid())))","(EXISTS ( SELECT 1
   FROM admin_users au
  WHERE (au.user_id = auth.uid())))"
public,venues,venues_update_owner,PERMISSIVE,{public},UPDATE,"(EXISTS ( SELECT 1
   FROM venue_owners vo
  WHERE ((vo.venue_id = venues.id) AND (vo.user_id = auth.uid()))))","(EXISTS ( SELECT 1
   FROM venue_owners vo
  WHERE ((vo.venue_id = venues.id) AND (vo.user_id = auth.uid()))))"
public,water_types,water_types_select_all,PERMISSIVE,{public},SELECT,true,
storage,objects,avatars_authenticated_manage_own,PERMISSIVE,{authenticated},ALL,"((bucket_id = 'avatars'::text) AND ((auth.uid())::text = split_part(name, '/'::text, 1)))","((bucket_id = 'avatars'::text) AND ((auth.uid())::text = split_part(name, '/'::text, 1)))"
storage,objects,avatars_public_read,PERMISSIVE,{public},SELECT,(bucket_id = 'avatars'::text),
storage,objects,catches_authenticated_delete_own,PERMISSIVE,{authenticated},DELETE,((bucket_id = 'catches'::text) AND ((owner_id = (auth.uid())::text) OR (owner = auth.uid()))),
storage,objects,catches_authenticated_insert_own,PERMISSIVE,{authenticated},INSERT,,((bucket_id = 'catches'::text) AND ((owner_id = (auth.uid())::text) OR (owner = auth.uid())))
storage,objects,catches_authenticated_select_own,PERMISSIVE,{authenticated},SELECT,((bucket_id = 'catches'::text) AND ((owner_id = (auth.uid())::text) OR (owner = auth.uid()))),
storage,objects,catches_authenticated_update_own,PERMISSIVE,{authenticated},UPDATE,((bucket_id = 'catches'::text) AND ((owner_id = (auth.uid())::text) OR (owner = auth.uid()))),((bucket_id = 'catches'::text) AND ((owner_id = (auth.uid())::text) OR (owner = auth.uid())))
storage,objects,venue_photos_authenticated_manage,PERMISSIVE,{authenticated},ALL,"((bucket_id = 'venue-photos'::text) AND is_venue_admin_or_owner(
CASE
    WHEN (split_part(name, '/'::text, 1) ~* '^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$'::text) THEN (split_part(name, '/'::text, 1))::uuid
    ELSE NULL::uuid
END))","((bucket_id = 'venue-photos'::text) AND is_venue_admin_or_owner(
CASE
    WHEN (split_part(name, '/'::text, 1) ~* '^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$'::text) THEN (split_part(name, '/'::text, 1))::uuid
    ELSE NULL::uuid
END))"
storage,objects,venue_photos_public_read,PERMISSIVE,{public},SELECT,(bucket_id = 'venue-photos'::text),
